.learning-header, .site-header-desktop {
  background-color: #303337 !important;
  color: #FFF !important;
  font-family: neue-haas-grotesk-text, sans-serif !important;
  font-style: normal !important;
  font-size: 14px !important;
  line-height: 18px !important;

  .user-dropdown .btn {
    height: 40px !important;
  }
  .container-xl{
    padding: 16px 8px !important;
  }

  .dropdown-toggle::after{
    display: none !important;
  }

  .logo img{
    height: 24px !important;
  }

  .font-weight-bold {
    font-weight: 400 !important;
  }

  .flex-grow-1.course-title-lockup {
    font-size: 14px !important;
  }

  .course-title-lockup {
    margin-left: 10px !important;
  }
  .dropdown-toggle, .menu-trigger {
    display: flex !important;
    padding: 4px 8px !important;
    align-items: center !important;
    gap: 8px;
    color: #FFF !important;
    border-radius: 4px !important;
    border: 1px solid var(--dark-silver-gray-text-secondary, #626A73) !important;
    opacity: 0.75 !important;
    font-family: neue-haas-grotesk-text, sans-serif !important;
    font-weight: 400 !important;
    font-style: normal !important;
    font-size: 0.875rem !important;
    line-height: 1.125rem !important;
    opacity: 0.75 !important;
    height: auto !important;

    &:hover, &:focus {
      display: flex !important;
      padding: 4px 8px !important;
      align-items: center !important;
      gap: 8px;
      color: #FFF !important;
      border-radius: 4px !important;
      border: 1px solid var(--dark-silver-gray-text-secondary, #626A73) !important;
      opacity: 1 !important;
      background-color: transparent !important;
    }
    &:btn:not(:disabled, .disabled, .btn-link).focus::before, .btn:not(:disabled, .disabled, .btn-link):focus::before {
      border: none !important;
    }
  }
  .dashboard-btn{
    text-decoration: none;
    text-align: center;
    display: inline-flex;
    -webkit-box-pack: center;
    justify-content: center;
    -webkit-box-align: center;
    align-items: center;
    transition: background 250ms;
    cursor: pointer;
    min-width: 100px;
    box-sizing: border-box;
    font-family: neue-haas-grotesk-text, sans-serif;
    font-weight: 500;
    font-style: normal;
    font-size: 0.75rem;
    line-height: 1rem;
    color: rgb(33, 35, 38);
    border: none;
    background-color: rgb(221, 225, 230);
    border-radius: 4px;
    height: 40px;
    padding: 18px 12px;
  &:hover{
    background: var(--white-mit-brand, #FFF) !important;
    text-decoration: none !important;
  }
  }
  .dropdown-menu-right{
    display: flex !important;
    flex-direction: column !important;
    align-items: stretch !important;
    padding: 0 !important;
    gap: 0 !important;
    border-radius: 8px !important;
    background: #FFF !important;
    box-shadow: 0 4px 16px 0 rgba(37,38,43,0.20), 0 2px 4px 0 rgba(37,38,43,0.10) !important;
    min-width: 200px !important;
    border: 1px solid #DDE1E6 !important;
    overflow: hidden;

    a, .dropdown-item, button.dropdown-item {
      display: flex !important;
      width: 100% !important;
      padding: 12px 16px !important;
      background: #FFF !important;
      color: #212326 !important;
      font-family: neue-haas-grotesk-text, sans-serif !important;
      font-size: 14px !important;
      line-height: 18px !important;
      font-weight: 400 !important;
      text-decoration: none !important;
      border: 0 !important;
      justify-content: flex-start !important;
      align-items: center !important;

      &:hover, &:focus {
        background: #F5F6F7 !important;
        color: #212326 !important;
        text-decoration: none !important;
      }

      &:active {
        background: #ECEEEF !important;
      }
    }

    a + a, .dropdown-item + .dropdown-item, button.dropdown-item + button.dropdown-item {
      border-top: 1px solid #DDE1E6;
    }
  }
  .btn-outline-primary:not(.dropdown-toggle, .menu-trigger), .btn-primary:not(.dropdown-toggle, .menu-trigger), .nav-link{
    display: inline-flex !important;
    height: 32px !important;
    padding: 18px 12px !important;
    flex-direction: column !important;
    justify-content: center !important;
    align-items: center !important;
    gap: 10px !important;
    flex-shrink: 0 !important;
    border-radius: 4px !important;
    border: 1px solid var(--Light-Gray-2, #DDE1E6) !important;
    background: var(--Light-Gray-2, #DDE1E6) !important;
    color: #212326 !important;
    font-size: 12px !important;
    margin-left: 10px !important;
    &:hover {
      text-decoration: none !important;
      color: #212326 !important;
    }
    p {
      color: #212326;
      &:hover {
        text-decoration: none !important;
        color: #212326 !important;
      }
    }
  &:hover{
    border-radius: 4px !important;
    border: 0 solid var(--dark-gray-2-text-primary, #212326) !important;
    background: var(--white-mit-brand, #FFF) !important;
    text-decoration: none !important;
  }
  }
}
.btn:not(:disabled, .disabled, .btn-link).focus::before, .btn:not(:disabled, .disabled, .btn-link):focus::before {
  border: none !important;
}
// Mobile responsive adjustments
@media (max-width: 991px) {
  .learning-header, .site-header-desktop {
    // Hide standalone dashboard button; moved into user dropdown
    .dashboard-btn { display: none !important; }

    // Hide the username to conserve space; keep icon only
    .dropdown-toggle .user-menu-name, .menu-trigger .user-menu-name { display: none !important; }
    .dropdown-toggle, .menu-trigger {
      gap: 2px !important;
      border: none !important;
      &:hover, &:focus { border: none !important; }
    }
    // Constrain long course titles to prevent overflow; allow ellipsis
    .course-title {
      max-width: 160px !important; // adjust as needed for available width
      white-space: nowrap !important;
      overflow: hidden !important;
      text-overflow: ellipsis !important;
    }

    // Tighten spacing within dropdown for smaller screens
    .dropdown-menu-right {
      min-width: 180px !important;
      a, .dropdown-item, button.dropdown-item { padding: 10px 14px !important; border-top: none !important; }
    }
  }
}
/**
 * AI Drawer Manager Sidebar Styles
 *
 * Styles for the AskTIM chat sidebar that integrates with the notifications_discussions_sidebar slot.
 */
.ai-drawer-wrapper {
  width: 30rem;
  margin: 0;
  flex-shrink: 0;
  height: 100vh;
  max-height: 100vh;
  align-self: flex-start;
  overflow: visible;

  // Sticky positioning - stays at top when scrolling
  position: sticky;
  top: 0;
  z-index: 5;

  &.ai-drawer-wrapper-fullscreen {
    position: fixed !important;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100% !important;
    max-width: 100%;
    z-index: 1050;
    border: none;
    border-radius: 0;
    align-self: stretch;
    background: transparent;

    &:has([data-smoot-version]) {
      background: white;
      pointer-events: auto;
    }

    &:not(:has([data-smoot-version])) {
      display: none;
      pointer-events: none !important;
    }
  }

  // Slot variant returns null when closed, so [data-smoot-version] element doesn't exist
  &:not(:has([data-smoot-version])) {
    width: 0;
    min-width: 0;
    margin: 0;
    overflow: hidden;
  }
}

// Inner Container

.ai-drawer-manager-sidebar-wrapper {
  position: relative;
  width: 100%;
  height: 100vh;
  max-height: 100vh;
  margin: 0;
  padding: 0;
  box-sizing: border-box;

  // Don't scroll here - the SlotContainer is the scrollElement
  overflow: hidden;

  transform: translateZ(0);

  background: transparent;
  border: none;
  border-radius: 0;

  &:has([data-smoot-version]) {
    background: white;
    border: 1px solid var(--pgn-color-light-400, #d7d3d1);
    border-radius: 4px;
  }
  [data-smoot-version] {
    display: flex;
    flex-direction: column;
    height: 100vh;
    max-height: 100vh;
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
  }

  .ai-drawer-wrapper-fullscreen & {
    height: 100%;
    max-height: 100%;
    border: none;
    border-radius: 0;
    background: transparent;

    &:has([data-smoot-version]) {
      background: white;
    }
  }

  // Stack conversation starter cards vertically in narrow sidebar
  // Only apply on screens greater than 1024px where the sidebar is constrained
  // Below 1024px, the component works fine in full-screen mode
  @media (min-width: 1025px) {
    form {
      // Target the Starters div which contains conversation starter buttons
      // Using :has() to identify the container with multiple button children
      // This selector works in modern browsers (Chrome 105+, Safari 15.4+, Firefox 121+)
      > div:has(> button + button) {
        flex-direction: column !important;
        gap: 12px !important;

        // Ensure conversation starter buttons take full width when stacked
        > button {
          flex: 1 1 100% !important;
          width: 100% !important;
          min-width: 0 !important;
        }
      }

      // Fallback for browsers that don't support :has()
      // Target the last div before the form ends (which is typically the Starters container)
      // This is less precise but provides broader browser support
      @supports not selector(:has(*)) {
        > div:last-of-type {
          flex-direction: column !important;
          gap: 12px !important;

          > button {
            flex: 1 1 100% !important;
            width: 100% !important;
            min-width: 0 !important;
          }
        }
      }
    }
  }
}
