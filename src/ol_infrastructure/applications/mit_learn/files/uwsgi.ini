[uwsgi]
auto-procname = true
buffer-size = 65535
die-on-term = true                   ; Shutdown when receiving SIGTERM (default is respawn)
disable-logging = true               ; Disable built-in logging
enable-threads = true
harakiri = 60                        ; forcefully kill workers after 60 seconds
hook-accepting1 = exec:touch /tmp/app-initialized
log-4xx = true                       ; but log 4xx's anyway
log-5xx = true                       ; and 5xx's
master = true
max-requests = 1000                  ; Restart workers after this many requests
max-requests-delta = 25
max-worker-lifetime = 3600           ; Restart workers after this many seconds
memory-report = true
need-app = true
offload-threads = 2
pidfile=/tmp/uwsgi_master.pid
post-buffering = 65535
processes = 2
py-callos-afterfork = true           ; allow workers to trap signals
reload-on-rss = 892                 ; Restart workers after this much resident memory in MB
single-interpreter = true
socket = :$(PORT)
socket-timeout = 3
stats = /tmp/uwsgi-stats.sock
strict = true
threads = 100
thunder-lock =
vacuum = true                        ; Delete sockets during shutdown
worker-reload-mercy = 60             ; How long to wait before forcefully killing workers
wsgi-file = main/wsgi.py
